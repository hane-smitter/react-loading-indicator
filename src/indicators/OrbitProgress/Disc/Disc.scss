@use "../../../scss/variables" as defaults;

$animationDuration: var(--rli-animation-duration, 1.5s);
$animationFn: var(--rli-animation-function, ease-in-out);

.disc-rli-bounding-box {
  font-size: defaults.$fontSizer;
  display: inline-block;

  .disc-throbber {
    width: 5em;
    height: 5em;
    color: var(--disc-color1);
    display: inline-block;

    // create stacking context
    position: relative;
    z-index: 0;

    .whirl {
      animation: rotate calc($animationDuration * 1.33) linear infinite;
      height: 100%;
      transform-origin: center center;
      width: 100%;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
    }

    .path {
      stroke-dasharray: 1, 125;
      stroke-dashoffset: 0;
      animation:
        dash $animationDuration $animationFn infinite,
        coloring calc($animationDuration * 4) $animationFn infinite;
      stroke-linecap: round;
    }
  }

  .disc-text {
    mix-blend-mode: difference;
    // filter: invert(3%);

    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    z-index: -2;

    // background-color: blue;
  }
}

// ðŸ‘‡ Added via JS for better cross-browser support
//
// @property --disc-color1 {
//   syntax: "<color>";
//   inherits: true;
//   initial-value: defaults.$defaultColor;
// }
// @property --disc-color2 {
//   syntax: "<color>";
//   inherits: true;
//   initial-value: defaults.$defaultColor;
// }
// @property --disc-color3 {
//   syntax: "<color>";
//   inherits: true;
//   initial-value: defaults.$defaultColor;
// }
// @property --disc-color4 {
//   syntax: "<color>";
//   inherits: true;
//   initial-value: defaults.$defaultColor;
// }

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 125;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 89, 125;
    stroke-dashoffset: -35px;
  }
  100% {
    stroke-dasharray: 89, 125;
    stroke-dashoffset: -124px;
  }
}

// @keyframes color {
//   100%,
//   0% {
//     stroke: var(--disc-color1);
//   }
//   40% {
//     stroke: var(--disc-color2);
//   }
//   66% {
//     stroke: var(--disc-color3);
//   }
//   80%,
//   90% {
//     stroke: var(--disc-color4);
//   }
// }

@keyframes coloring {
  100%,0% {
    stroke: var(--disc-color1);
  }
  25% {
    stroke: var(--disc-color2);
  }
  50% {
    stroke: var(--disc-color3);
  }
  75% {
    stroke: var(--disc-color4);
  }
}
