@use "sass:string";
@use "../../../scss/variables" as defaults;

$animationDuration: var(--rli-animation-duration, 1.2s);
$animationFn: var(--rli-animation-function, linear);

// Animation names
$annulusSplitsSpin: string.unique-id();
$annulusSplitsColoring: string.unique-id();

@function annulusSplitColorPhase($num: null) {
	$cssVar: var(--OP-annulus-dual-sectors-phase1-color);

	@if ($num and $num != 1) {
		$cssVar: var(--OP-annulus-dual-sectors-phase#{$num}-color, $cssVar);
	}

	@return $cssVar;
}

.OP-annulus-dual-sectors-rli-bounding-box {
	--OP-annulus-dual-sectors-phase1-color: #{defaults.$defaultColor};

	font-size: defaults.$fontSizer;
	box-sizing: border-box;
	display: inline-block;

	.OP-annulus-dual-sectors-indicator {
		width: 5em;
		height: 5em;
		display: inline-block;

		// create stacking context
		position: relative;
		z-index: 0;

		color: annulusSplitColorPhase();

		.annulus-sectors {
			box-sizing: border-box;
			width: 100%;
			height: 100%;
			border-radius: 50%;
			border-width: 0.34em;
			border-style: solid;
			border-color: annulusSplitColorPhase(1) transparent
				annulusSplitColorPhase(1) transparent;
			background-color: transparent;

			animation:
				$animationDuration $animationFn infinite $annulusSplitsSpin,
				calc($animationDuration * 4) $animationFn infinite
					$annulusSplitsColoring;
		}

		.OP-annulus-dual-sectors-text {
			mix-blend-mode: difference;

			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);

			z-index: -2;
		}
	}
}
@keyframes #{$annulusSplitsSpin} {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

@keyframes #{$annulusSplitsColoring} {
	100%,
	0% {
		border-color: annulusSplitColorPhase(1) transparent;
	}
	20% {
		border-color: annulusSplitColorPhase(1) transparent;
	}
	25% {
		border-color: annulusSplitColorPhase(2) transparent;
	}
	45% {
		border-color: annulusSplitColorPhase(2) transparent;
	}
	50% {
		border-color: annulusSplitColorPhase(3) transparent;
	}
	70% {
		border-color: annulusSplitColorPhase(3) transparent;
	}
	75% {
		border-color: annulusSplitColorPhase(4) transparent;
	}
	95% {
		border-color: annulusSplitColorPhase(4) transparent;
	}
}
